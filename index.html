<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IdNix | Unified Identity by CodeNix</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap');
        body { font-family: 'Plus Jakarta Sans', sans-serif; scroll-behavior: smooth; }
        .glass { background: rgba(15, 23, 42, 0.7); backdrop-filter: blur(12px); }
        .nix-card { background: linear-gradient(135deg, #4f46e5 0%, #312e81 100%); transition: transform 0.3s ease; }
        .nix-card:hover { transform: translateY(-5px); }
        .hidden-view { display: none !important; }
        .status-pill { padding: 2px 8px; border-radius: 99px; font-size: 10px; font-weight: bold; text-transform: uppercase; }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
    </style>
</head>
<body class="bg-slate-950 text-slate-200 min-h-screen">

    <!-- Auth View -->
    <div id="auth-view" class="min-h-screen flex flex-col md:flex-row">
        <div class="w-full md:w-1/2 p-12 flex flex-col justify-between bg-gradient-to-br from-indigo-900 via-slate-950 to-black">
            <div>
                <div class="flex items-center space-x-2 mb-8 text-white">
                    <i class="fas fa-microchip text-indigo-500 text-3xl"></i>
                    <span class="text-2xl font-bold tracking-tighter">IdNix</span>
                </div>
                <h1 class="text-5xl md:text-7xl font-extrabold text-white mb-6 leading-tight">
                    One Identity. <br>
                    <span class="text-indigo-500 opacity-80">Infinite</span> Access.
                </h1>
                <p class="text-slate-400 text-xl max-w-md leading-relaxed">
                    Link all your services and information through your unique nixID identifier. Secure, decentralized, and seamless.
                </p>
            </div>
            <div class="hidden md:block text-slate-500 text-sm">© 2024 CodeNix Platform • v2.0 Evolution</div>
        </div>

        <div class="w-full md:w-1/2 p-6 md:p-24 flex items-center justify-center bg-slate-950">
            <div class="w-full max-w-md glass border border-slate-800 p-8 rounded-3xl shadow-2xl">
                <div id="auth-form-container">
                    <div class="mb-8">
                        <h2 id="auth-title" class="text-3xl font-bold text-white mb-2">Welcome Back</h2>
                        <p id="auth-subtitle" class="text-slate-400">Sign in to access your Nix identity.</p>
                    </div>

                    <form id="auth-form" class="space-y-4">
                        <div id="username-field" class="hidden">
                            <label class="block text-sm font-medium text-slate-400 mb-1">Username</label>
                            <div class="relative">
                                <input type="text" id="username" placeholder="john_doe" class="w-full bg-slate-800 border border-slate-700 text-white px-4 py-3 rounded-xl outline-none focus:ring-2 focus:ring-indigo-500 transition-all">
                                <span class="absolute right-4 top-3 text-slate-500">@nix</span>
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-slate-400 mb-1">Email Address</label>
                            <input type="email" id="email" required placeholder="name@domain.com" class="w-full bg-slate-800 border border-slate-700 text-white px-4 py-3 rounded-xl outline-none focus:ring-2 focus:ring-indigo-500 transition-all">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-slate-400 mb-1">Secure Password</label>
                            <input type="password" id="password" required placeholder="••••••••" class="w-full bg-slate-800 border border-slate-700 text-white px-4 py-3 rounded-xl outline-none focus:ring-2 focus:ring-indigo-500 transition-all">
                        </div>
                        <div id="auth-error" class="text-red-400 text-sm bg-red-400/10 p-3 rounded-lg border border-red-400/20 hidden"></div>
                        <button type="submit" id="auth-submit" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-4 rounded-xl transition-all shadow-lg shadow-indigo-600/20 active:scale-[0.98]">
                            Sign In
                        </button>
                    </form>
                    <div class="mt-8 text-center border-t border-slate-800 pt-6">
                        <button id="toggle-auth" class="text-indigo-400 text-sm font-medium hover:text-indigo-300 transition-colors">Don't have an ID? Create one</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- App View -->
    <div id="app-view" class="hidden-view min-h-screen flex flex-col md:flex-row">
        <!-- Sidebar -->
        <aside class="w-full md:w-64 border-r border-slate-800 flex flex-col bg-slate-950 z-30">
            <div class="p-8 flex items-center justify-between text-white">
                <div class="flex items-center space-x-2">
                    <i class="fas fa-microchip text-indigo-500 text-xl"></i>
                    <span class="text-xl font-bold tracking-tighter uppercase">IdNix</span>
                </div>
                <button class="md:hidden text-slate-400" onclick="toggleMobileMenu()"><i class="fas fa-bars"></i></button>
            </div>
            
            <nav id="sidebar-nav" class="flex-1 px-4 space-y-2 overflow-y-auto scrollbar-hide">
                <div class="text-[10px] font-bold text-slate-500 uppercase tracking-widest px-4 mb-2">Core</div>
                <button onclick="showSection('dashboard')" class="nav-btn w-full flex items-center space-x-3 px-4 py-3 rounded-xl bg-indigo-600 text-white transition-all" id="nav-dashboard">
                    <i class="fas fa-th-large w-5"></i><span>Dashboard</span>
                </button>
                <button onclick="showSection('wallet')" class="nav-btn w-full flex items-center space-x-3 px-4 py-3 rounded-xl text-slate-400 hover:bg-slate-900 transition-all" id="nav-wallet">
                    <i class="fas fa-wallet w-5"></i><span>Nix Wallet</span>
                </button>
                <button onclick="showSection('ecosystem')" class="nav-btn w-full flex items-center space-x-3 px-4 py-3 rounded-xl text-slate-400 hover:bg-slate-900 transition-all" id="nav-ecosystem">
                    <i class="fas fa-rocket w-5"></i><span>Ecosystem</span>
                </button>

                <div class="text-[10px] font-bold text-slate-500 uppercase tracking-widest px-4 mb-2 mt-6">Settings</div>
                <button onclick="showSection('profile')" class="nav-btn w-full flex items-center space-x-3 px-4 py-3 rounded-xl text-slate-400 hover:bg-slate-900 transition-all" id="nav-profile">
                    <i class="fas fa-id-card w-5"></i><span>My Identity</span>
                </button>
                <button onclick="showSection('security')" class="nav-btn w-full flex items-center space-x-3 px-4 py-3 rounded-xl text-slate-400 hover:bg-slate-900 transition-all" id="nav-security">
                    <i class="fas fa-shield-alt w-5"></i><span>Security</span>
                </button>
            </nav>

            <div class="p-4 border-t border-slate-800 bg-slate-950/50">
                <button id="signout-btn" class="w-full flex items-center space-x-3 px-4 py-3 text-slate-500 hover:text-red-400 transition-colors">
                    <i class="fas fa-power-off"></i><span>Terminate Session</span>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 overflow-y-auto bg-slate-950 relative">
            <!-- Header -->
            <header class="h-20 border-b border-slate-800 flex items-center justify-between px-8 sticky top-0 bg-slate-950/80 backdrop-blur-xl z-20">
                <div>
                    <h2 id="view-title" class="text-xl font-bold text-white">Overview</h2>
                    <p id="view-subtitle" class="text-[10px] text-slate-500 uppercase tracking-wider">Operational Status: Normal</p>
                </div>
                <div class="flex items-center space-x-6">
                    <div class="relative cursor-pointer group">
                        <i class="fas fa-bell text-slate-400 group-hover:text-white transition-colors"></i>
                        <span class="absolute -top-1 -right-1 w-2 h-2 bg-indigo-500 rounded-full border border-slate-950"></span>
                    </div>
                    <div class="h-8 w-[1px] bg-slate-800"></div>
                    <div class="flex items-center space-x-3">
                        <div class="text-right hidden sm:block">
                            <p id="header-username" class="text-sm font-bold text-white leading-none">User</p>
                            <p id="header-nixid" class="text-[10px] text-indigo-400 font-mono">id@nix</p>
                        </div>
                        <div id="user-avatar" class="w-10 h-10 rounded-xl bg-gradient-to-br from-indigo-500 to-blue-700 flex items-center justify-center text-white font-bold border border-indigo-400/30 shadow-lg shadow-indigo-500/10">U</div>
                    </div>
                </div>
            </header>

            <!-- Scrollable Content -->
            <div class="p-8 max-w-6xl mx-auto space-y-12">
                
                <!-- DASHBOARD -->
                <section id="dashboard-section" class="space-y-8 animate-in fade-in duration-500">
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div class="bg-slate-900 border border-slate-800 p-6 rounded-2xl hover:border-slate-700 transition-colors cursor-default">
                            <div class="flex justify-between mb-4">
                                <span class="text-slate-500 text-[10px] font-bold uppercase">Balance</span>
                                <i class="fas fa-coins text-emerald-500"></i>
                            </div>
                            <div id="stat-credits" class="text-3xl font-bold tracking-tight">100.00 <span class="text-sm text-slate-500 font-medium">NX</span></div>
                        </div>
                        <div class="bg-slate-900 border border-slate-800 p-6 rounded-2xl hover:border-slate-700 transition-colors cursor-default">
                            <div class="flex justify-between mb-4">
                                <span class="text-slate-500 text-[10px] font-bold uppercase">Membership</span>
                                <i class="fas fa-crown text-amber-500"></i>
                            </div>
                            <div id="stat-tier" class="text-3xl font-bold tracking-tight">Pioneer</div>
                        </div>
                        <div class="bg-slate-900 border border-slate-800 p-6 rounded-2xl hover:border-slate-700 transition-colors cursor-default">
                            <div class="flex justify-between mb-4">
                                <span class="text-slate-500 text-[10px] font-bold uppercase">Safety Score</span>
                                <i class="fas fa-shield-heart text-indigo-500"></i>
                            </div>
                            <div class="text-3xl font-bold tracking-tight">98%</div>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-5 gap-8">
                        <!-- Digital ID Card -->
                        <div class="lg:col-span-3 nix-card p-10 rounded-3xl text-white relative overflow-hidden shadow-2xl flex flex-col justify-between min-h-[240px]">
                            <div class="relative z-10 flex justify-between items-start">
                                <div>
                                    <i class="fas fa-microchip text-4xl mb-4"></i>
                                    <h3 class="text-lg font-bold opacity-80">Nix Digital ID</h3>
                                </div>
                                <div class="text-right">
                                    <span class="bg-white/10 px-3 py-1 rounded-full text-[10px] font-bold uppercase backdrop-blur-md">V2-Core-Protocol</span>
                                </div>
                            </div>
                            
                            <div class="relative z-10">
                                <p class="text-indigo-200 text-[10px] uppercase font-bold mb-1 tracking-widest">Master Identifier</p>
                                <h3 id="card-nixid" class="text-4xl font-mono font-bold tracking-tighter">loading@nix</h3>
                            </div>

                            <div class="relative z-10 flex justify-between items-end">
                                <div class="flex space-x-8">
                                    <div><p class="text-indigo-200 text-[10px] uppercase font-bold opacity-60">Status</p><p class="text-sm font-bold"><i class="fas fa-check-circle text-emerald-400 mr-1"></i>Secure</p></div>
                                    <div><p class="text-indigo-200 text-[10px] uppercase font-bold opacity-60">Expiry</p><p class="text-sm font-bold">Infinite</p></div>
                                </div>
                                <div class="w-12 h-12 bg-white/10 rounded-lg flex items-center justify-center backdrop-blur-md">
                                    <i class="fas fa-qrcode text-xl"></i>
                                </div>
                            </div>
                            <!-- Background Decorations -->
                            <div class="absolute -right-10 -bottom-10 w-64 h-64 bg-white/5 rounded-full blur-3xl"></div>
                            <div class="absolute top-0 left-0 w-full h-full bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-10"></div>
                        </div>

                        <!-- Recent Activity -->
                        <div class="lg:col-span-2 bg-slate-900 border border-slate-800 rounded-3xl p-6 flex flex-col">
                            <h3 class="text-sm font-bold text-white mb-6 flex items-center"><i class="fas fa-history text-slate-500 mr-2"></i>Recent Access</h3>
                            <div class="space-y-4 flex-1">
                                <div class="flex items-center justify-between p-3 bg-slate-800/50 rounded-xl border border-slate-800">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-8 h-8 rounded-lg bg-indigo-500/20 flex items-center justify-center text-indigo-400"><i class="fas fa-sign-in-alt text-xs"></i></div>
                                        <div><p class="text-xs font-bold">IdNix Dashboard</p><p class="text-[10px] text-slate-500">Just now</p></div>
                                    </div>
                                    <span class="status-pill bg-emerald-500/10 text-emerald-500">Active</span>
                                </div>
                                <div class="flex items-center justify-between p-3 bg-slate-800/30 rounded-xl border border-transparent">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-8 h-8 rounded-lg bg-slate-800 flex items-center justify-center text-slate-400"><i class="fas fa-code-branch text-xs"></i></div>
                                        <div><p class="text-xs font-bold">CodeNix Auth API</p><p class="text-[10px] text-slate-500">2 hours ago</p></div>
                                    </div>
                                    <span class="status-pill bg-slate-800 text-slate-500">Closed</span>
                                </div>
                            </div>
                            <button class="w-full mt-4 text-[10px] font-bold text-indigo-400 uppercase tracking-widest hover:text-indigo-300">View Full Logs</button>
                        </div>
                    </div>
                </section>

                <!-- WALLET -->
                <section id="wallet-section" class="hidden-view space-y-8">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div class="bg-gradient-to-br from-slate-900 to-black border border-slate-800 rounded-3xl p-10">
                            <h3 class="text-2xl font-bold mb-2">Internal Assets</h3>
                            <p class="text-slate-400 text-sm mb-8">Nix credits are used for internal ecosystem services.</p>
                            
                            <div class="flex items-center justify-between p-6 bg-slate-950 rounded-2xl border border-indigo-500/30 mb-6">
                                <div>
                                    <p class="text-[10px] font-bold text-indigo-400 uppercase mb-1">Total Available</p>
                                    <p id="wallet-balance" class="text-4xl font-bold">100.00 NX</p>
                                </div>
                                <button class="w-12 h-12 bg-indigo-600 rounded-xl flex items-center justify-center text-white hover:bg-indigo-700 transition-colors shadow-lg shadow-indigo-600/20">
                                    <i class="fas fa-plus"></i>
                                </button>
                            </div>
                            <div class="grid grid-cols-2 gap-4">
                                <button class="bg-slate-800 py-3 rounded-xl font-bold text-xs hover:bg-slate-700 transition-colors"><i class="fas fa-paper-plane mr-2"></i>Send</button>
                                <button class="bg-slate-800 py-3 rounded-xl font-bold text-xs hover:bg-slate-700 transition-colors"><i class="fas fa-qrcode mr-2"></i>Receive</button>
                            </div>
                        </div>

                        <div class="bg-slate-900 border border-slate-800 rounded-3xl p-8">
                            <h3 class="text-lg font-bold mb-6">Transaction History</h3>
                            <div class="space-y-4 overflow-y-auto max-h-[300px] pr-2 scrollbar-hide">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center space-x-4">
                                        <div class="w-10 h-10 bg-emerald-500/10 rounded-full flex items-center justify-center text-emerald-500"><i class="fas fa-arrow-down"></i></div>
                                        <div><p class="text-sm font-bold">Welcome Bonus</p><p class="text-xs text-slate-500">Initial Grant</p></div>
                                    </div>
                                    <div class="text-right"><p class="text-sm font-bold text-emerald-500">+100.00 NX</p><p class="text-xs text-slate-500">Dec 2024</p></div>
                                </div>
                                <div class="opacity-30 flex justify-center py-10">
                                    <p class="text-xs italic">No other transactions found</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- ECOSYSTEM -->
                <section id="ecosystem-section" class="hidden-view space-y-12">
                    <div class="flex items-end justify-between">
                        <div>
                            <h3 class="text-3xl font-bold">The Ecosystem</h3>
                            <p class="text-slate-400">Services natively compatible with your nixID.</p>
                        </div>
                        <div class="bg-slate-900 p-1 rounded-xl flex">
                            <button class="bg-indigo-600 px-4 py-2 rounded-lg text-xs font-bold">All Apps</button>
                            <button class="px-4 py-2 rounded-lg text-xs font-bold text-slate-500">Linked</button>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <!-- App 1 -->
                        <div class="bg-slate-900 border border-slate-800 rounded-2xl p-6 hover:border-indigo-500/50 transition-all group">
                            <div class="flex justify-between items-start mb-6">
                                <div class="w-12 h-12 bg-indigo-600/20 rounded-xl flex items-center justify-center text-indigo-400"><i class="fas fa-terminal text-xl"></i></div>
                                <span class="status-pill bg-indigo-500/10 text-indigo-500">Connected</span>
                            </div>
                            <h4 class="font-bold text-lg mb-2">CodeNix Cloud</h4>
                            <p class="text-sm text-slate-400 mb-6">Secure developer hosting and cloud infrastructure integration.</p>
                            <button class="w-full py-3 bg-slate-800 rounded-xl text-xs font-bold hover:bg-slate-750 group-hover:bg-indigo-600 transition-all">Open Service</button>
                        </div>
                        <!-- App 2 -->
                        <div class="bg-slate-900 border border-slate-800 rounded-2xl p-6 hover:border-indigo-500/50 transition-all group opacity-60 grayscale hover:grayscale-0 hover:opacity-100">
                            <div class="flex justify-between items-start mb-6">
                                <div class="w-12 h-12 bg-slate-800 rounded-xl flex items-center justify-center text-slate-400"><i class="fas fa-ghost text-xl"></i></div>
                                <span class="status-pill bg-slate-800 text-slate-500">Not Linked</span>
                            </div>
                            <h4 class="font-bold text-lg mb-2">Specter Auth</h4>
                            <p class="text-sm text-slate-400 mb-6">Anonymous relay service for cross-platform session masking.</p>
                            <button class="w-full py-3 bg-indigo-600/10 text-indigo-400 rounded-xl text-xs font-bold hover:bg-indigo-600 hover:text-white transition-all">Link Identity</button>
                        </div>
                        <!-- App 3 -->
                        <div class="bg-slate-900 border border-slate-800 rounded-2xl p-6 hover:border-indigo-500/50 transition-all group opacity-60 grayscale hover:grayscale-0 hover:opacity-100">
                            <div class="flex justify-between items-start mb-6">
                                <div class="w-12 h-12 bg-slate-800 rounded-xl flex items-center justify-center text-slate-400"><i class="fas fa-cube text-xl"></i></div>
                                <span class="status-pill bg-slate-800 text-slate-500">Coming Soon</span>
                            </div>
                            <h4 class="font-bold text-lg mb-2">Nix Marketplace</h4>
                            <p class="text-sm text-slate-400 mb-6">Decentralized asset trading using native NX credits.</p>
                            <button disabled class="w-full py-3 bg-slate-900 border border-slate-800 rounded-xl text-xs font-bold text-slate-600 cursor-not-allowed">Pre-register</button>
                        </div>
                    </div>
                </section>

                <!-- IDENTITY/PROFILE -->
                <section id="profile-section" class="hidden-view space-y-8">
                    <div class="max-w-3xl bg-slate-900 border border-slate-800 rounded-3xl overflow-hidden">
                        <div class="p-8 border-b border-slate-800 bg-gradient-to-r from-slate-900 to-slate-950">
                            <h3 class="text-2xl font-bold">Identity Configuration</h3>
                            <p class="text-slate-400 text-sm">How you appear within the ecosystem.</p>
                        </div>
                        <form id="profile-form" class="p-8 space-y-6">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label class="block text-[10px] font-bold text-slate-500 uppercase mb-2">Full Legal Name</label>
                                    <input type="text" id="p-fullname" class="w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 outline-none focus:ring-2 focus:ring-indigo-500 transition-all" placeholder="Enter name">
                                </div>
                                <div>
                                    <label class="block text-[10px] font-bold text-slate-500 uppercase mb-2">Primary Location</label>
                                    <input type="text" id="p-location" class="w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 outline-none focus:ring-2 focus:ring-indigo-500 transition-all" placeholder="City, Country">
                                </div>
                            </div>
                            <div>
                                <label class="block text-[10px] font-bold text-slate-500 uppercase mb-2">Identity Biography</label>
                                <textarea id="p-bio" class="w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 outline-none focus:ring-2 focus:ring-indigo-500 transition-all h-32 resize-none" placeholder="Describe your persona..."></textarea>
                            </div>
                            <div class="flex items-center justify-between pt-4">
                                <p class="text-xs text-slate-500 italic"><i class="fas fa-info-circle mr-1"></i>Some changes may require re-verification.</p>
                                <button type="submit" class="bg-indigo-600 px-8 py-4 rounded-xl font-bold hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-600/20 active:scale-95">
                                    <i class="fas fa-save mr-2"></i>Apply Changes
                                </button>
                            </div>
                        </form>
                    </div>
                </section>

                <!-- SECURITY -->
                <section id="security-section" class="hidden-view space-y-8">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <div class="bg-slate-900 border border-slate-800 rounded-3xl p-8">
                            <h3 class="text-xl font-bold mb-6">Account Protection</h3>
                            <div class="space-y-6">
                                <div class="flex items-center justify-between">
                                    <div><p class="font-bold">Two-Factor Authentication</p><p class="text-xs text-slate-500">Added layer of security for logins.</p></div>
                                    <div class="w-12 h-6 bg-emerald-500 rounded-full relative"><span class="absolute right-1 top-1 w-4 h-4 bg-white rounded-full"></span></div>
                                </div>
                                <div class="flex items-center justify-between opacity-50">
                                    <div><p class="font-bold">Hardware Key Support</p><p class="text-xs text-slate-500">YubiKey and Titan support.</p></div>
                                    <div class="w-12 h-6 bg-slate-700 rounded-full relative"><span class="absolute left-1 top-1 w-4 h-4 bg-white rounded-full"></span></div>
                                </div>
                                <hr class="border-slate-800">
                                <button class="w-full py-3 bg-red-500/10 text-red-500 border border-red-500/20 rounded-xl font-bold text-xs hover:bg-red-500 hover:text-white transition-all">Revoke All Third-Party Access</button>
                            </div>
                        </div>

                        <div class="bg-slate-900 border border-slate-800 rounded-3xl p-8">
                            <h3 class="text-xl font-bold mb-6">Developer Mode</h3>
                            <div class="p-6 bg-slate-950 rounded-2xl border border-slate-800">
                                <p class="text-xs text-slate-400 mb-4 font-mono leading-relaxed">Active API Key: nix_live_83...k92<br>Webhooks: 0 active</p>
                                <button class="text-indigo-400 font-bold text-[10px] uppercase tracking-widest hover:underline">Regenerate Keys</button>
                            </div>
                            <div class="mt-6">
                                <label class="flex items-center cursor-pointer">
                                    <input type="checkbox" class="hidden" id="dev-toggle">
                                    <div class="w-10 h-5 bg-slate-800 rounded-full relative mr-3 border border-slate-700"><div class="dot absolute left-1 top-1 w-3 h-3 bg-slate-500 rounded-full transition-all"></div></div>
                                    <span class="text-sm font-bold text-slate-400">Enable Experimental APIs</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </section>

            </div>
        </main>
    </div>

    <!-- Notification Toast -->
    <div id="toast" class="fixed bottom-8 right-8 bg-indigo-600 text-white px-6 py-4 rounded-2xl shadow-2xl transition-all translate-y-24 opacity-0 z-50 flex items-center space-x-3">
        <i class="fas fa-check-circle"></i>
        <span id="toast-message" class="font-bold text-sm">Action Successful</span>
    </div>

    <script>
        // Configuration
        const SUPABASE_URL = "https://vnyltfnyuzlfdzjpkzbu.supabase.co";
        const SUPABASE_ANON_KEY = "sb_publishable_fo3B8xkI1AG-u2nJaGK2YQ_LbE5khrC";
        
        window.nixSupabase = null;
        let authMode = 'signin';

        // Initialize App
        document.addEventListener('DOMContentLoaded', () => {
            window.nixSupabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
            checkSession();
            setupInteractions();
        });

        function setupInteractions() {
            // Dev toggle UI effect
            document.getElementById('dev-toggle')?.addEventListener('change', (e) => {
                const dot = e.target.nextElementSibling.querySelector('.dot');
                if(e.target.checked) {
                    dot.classList.add('translate-x-5', 'bg-indigo-400');
                    showToast("Developer Mode Enabled", "info");
                } else {
                    dot.classList.remove('translate-x-5', 'bg-indigo-400');
                }
            });
        }

        // Auth Toggle Logic
        document.getElementById('toggle-auth').addEventListener('click', () => {
            authMode = authMode === 'signin' ? 'signup' : 'signin';
            document.getElementById('auth-title').innerText = authMode === 'signin' ? 'Welcome Back' : 'Join IdNix';
            document.getElementById('auth-subtitle').innerText = authMode === 'signin' ? 'Sign in to access your Nix identity.' : 'Create your unique nixID to start exploring.';
            document.getElementById('auth-submit').innerText = authMode === 'signin' ? 'Sign In' : 'Create Identity';
            document.getElementById('toggle-auth').innerText = authMode === 'signin' ? "Don't have an ID? Create one" : "Already have an ID? Sign in";
            document.getElementById('username-field').classList.toggle('hidden', authMode === 'signin');
        });

        // Handle Login/Signup
        document.getElementById('auth-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const btn = document.getElementById('auth-submit');
            const originalText = btn.innerText;
            btn.innerText = "Processing...";
            btn.disabled = true;

            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const username = document.getElementById('username').value;
            const errorEl = document.getElementById('auth-error');
            
            errorEl.classList.add('hidden');
            
            try {
                if (authMode === 'signup') {
                    const { error } = await window.nixSupabase.auth.signUp({
                        email, password,
                        options: { data: { username, nix_id: `${username}@nix` } }
                    });
                    if (error) throw error;
                    showToast('Signup successful! Check email.');
                } else {
                    const { error } = await window.nixSupabase.auth.signInWithPassword({ email, password });
                    if (error) throw error;
                    showToast('Welcome back!');
                }
            } catch (err) {
                errorEl.innerText = err.message;
                errorEl.classList.remove('hidden');
            } finally {
                btn.innerText = originalText;
                btn.disabled = false;
            }
        });

        // Sign Out
        document.getElementById('signout-btn').addEventListener('click', async () => {
            await window.nixSupabase.auth.signOut();
            location.reload();
        });

        async function checkSession() {
            const { data: { session } } = await window.nixSupabase.auth.getSession();
            if (session) {
                document.getElementById('auth-view').classList.add('hidden-view');
                document.getElementById('app-view').classList.remove('hidden-view');
                loadProfile(session.user.id);
            }

            window.nixSupabase.auth.onAuthStateChange((_event, session) => {
                if (session) {
                    document.getElementById('auth-view').classList.add('hidden-view');
                    document.getElementById('app-view').classList.remove('hidden-view');
                    loadProfile(session.user.id);
                } else {
                    document.getElementById('auth-view').classList.remove('hidden-view');
                    document.getElementById('app-view').classList.add('hidden-view');
                }
            });
        }

        async function loadProfile(userId) {
            const { data, error } = await window.nixSupabase.from('profiles').select('*').eq('id', userId).single();
            if (data) {
                document.getElementById('header-username').innerText = data.username;
                document.getElementById('header-nixid').innerText = data.nix_id;
                document.getElementById('card-nixid').innerText = data.nix_id;
                document.getElementById('user-avatar').innerText = data.username[0].toUpperCase();
                document.getElementById('stat-credits').innerHTML = `${data.credit_balance} <span class="text-sm text-slate-500 font-medium">NX</span>`;
                document.getElementById('wallet-balance').innerText = `${data.credit_balance} NX`;
                document.getElementById('stat-tier').innerText = data.tier;

                // Fill profile form
                document.getElementById('p-fullname').value = data.full_name || '';
                document.getElementById('p-location').value = data.location || '';
                document.getElementById('p-bio').value = data.bio || '';
            }
        }

        document.getElementById('profile-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const { data: { session } } = await window.nixSupabase.auth.getSession();
            const updates = {
                full_name: document.getElementById('p-fullname').value,
                location: document.getElementById('p-location').value,
                bio: document.getElementById('p-bio').value
            };
            const { error } = await window.nixSupabase.from('profiles').update(updates).eq('id', session.user.id);
            if (error) {
                showToast(error.message, "error");
            } else {
                showToast("Identity synchronized successfully!");
                loadProfile(session.user.id);
            }
        });

        function showSection(name) {
            const sections = ['dashboard', 'wallet', 'ecosystem', 'profile', 'security'];
            sections.forEach(s => {
                document.getElementById(`${s}-section`).classList.add('hidden-view');
                document.getElementById(`nav-${s}`).classList.remove('bg-indigo-600', 'text-white');
                document.getElementById(`nav-${s}`).classList.add('text-slate-400');
            });
            
            document.getElementById(`${name}-section`).classList.remove('hidden-view');
            document.getElementById(`nav-${name}`).classList.add('bg-indigo-600', 'text-white');
            document.getElementById(`nav-${name}`).classList.remove('text-slate-400');
            
            const titles = {
                dashboard: 'Overview',
                wallet: 'Financial Assets',
                ecosystem: 'Connected Ecosystem',
                profile: 'Identity Settings',
                security: 'Safety & Protection'
            };
            document.getElementById('view-title').innerText = titles[name];
        }

        function showToast(message, type = "success") {
            const toast = document.getElementById('toast');
            const messageEl = document.getElementById('toast-message');
            messageEl.innerText = message;
            
            toast.classList.remove('bg-indigo-600', 'bg-red-600', 'bg-blue-600');
            if(type === 'error') toast.classList.add('bg-red-600');
            else if(type === 'info') toast.classList.add('bg-blue-600');
            else toast.classList.add('bg-indigo-600');

            toast.classList.remove('translate-y-24', 'opacity-0');
            setTimeout(() => {
                toast.classList.add('translate-y-24', 'opacity-0');
            }, 3000);
        }

        function toggleMobileMenu() {
            const nav = document.getElementById('sidebar-nav');
            nav.classList.toggle('hidden');
        }
    </script>
</body>
</html>
